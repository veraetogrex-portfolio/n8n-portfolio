# RAG Knowledge Base - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Google Docs ‚Üí Pinecone

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π. –í–æ—Ä–∫—Ñ–ª–æ—É –±–µ—Ä–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ Google Docs, –æ—á–∏—â–∞–µ—Ç –µ–≥–æ, —Ä–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ OpenAI API –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Pinecone –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Ç–∞–∫–∞—è —Å–∏—Å—Ç–µ–º–∞:**
- –í—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞—Ç—å Knowledge Base –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ù—É–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (–Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)
- –î–æ–∫—É–º–µ–Ω—Ç—ã –º–µ–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–æ –∏ –Ω—É–∂–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã:**
- Base –∑–Ω–∞–Ω–∏–π –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- FAQ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è RAG-—á–∞—Ç–±–æ—Ç–∞ –∏–ª–∏ AI Assistant

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Google Docs    ‚îÇ  –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Google Drive      ‚îÇ  –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
‚îÇ Trigger          ‚îÇ  (–∫–∞–∂–¥—ã–π —á–∞—Å)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Get a document       ‚îÇ  –ß–∏—Ç–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç
‚îÇ (Google Docs API)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ HTTP Request2        ‚îÇ  –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ
‚îÇ (Pinecone delete)    ‚îÇ  –≤–µ–∫—Ç–æ—Ä—ã (deleteAll)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Code JavaScript1     ‚îÇ  –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞:
‚îÇ (Text cleaning)      ‚îÇ  - –£–¥–∞–ª—è–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
‚îÇ                      ‚îÇ  - –£–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–∏–º–≤–æ–ª—ã
‚îÇ                      ‚îÇ  - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ–±–µ–ª—ã
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Code Python          ‚îÇ  –ß–∞–Ω–∫–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚îÇ (Chunking)           ‚îÇ  - –†–∞–∑–±–∏–≤–∞–µ—Ç –ø–æ 500 —Å–ª–æ–≤
‚îÇ                      ‚îÇ  - –î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ HTTP Request         ‚îÇ  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îÇ (OpenAI embeddings)  ‚îÇ  (text-embedding-3-small)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Merge               ‚îÇ  –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ:
‚îÇ                      ‚îÇ  - –¢–µ–∫—Å—Ç + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Code JavaScript      ‚îÇ  –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Pinecone:
‚îÇ (Vector formatting)  ‚îÇ  - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤
‚îÇ                      ‚îÇ  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ID –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ HTTP Request1        ‚îÇ  –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Pinecone
‚îÇ (Pinecone upsert)    ‚îÇ  (–≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
      ‚úÖ Done
```

## üîß –ù–æ–¥—ã –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### 1. **Google Drive Trigger** ‚è∞
```javascript
–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:  –ö–∞–∂–¥—ã–π —á–∞—Å (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)
–°–ª–µ–¥–∏—Ç –∑–∞:   –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º –≤ Google Drive
API:          Google Drive OAuth2
–í—ã—Ö–æ–¥:        –°–∏–≥–Ω–∞–ª –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫:**
- –î–µ—à–µ–≤–ª–µ, —á–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å Google Docs API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 2. **Get a document** üìÑ
```javascript
–ß–∏—Ç–∞–µ—Ç:       –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ Google Docs
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:   Google Docs API v2
–í—ã—Ö–æ–¥:        { documentId, content, title, ... }
```

**–ü—Ä–∏–º–µ—Ä –≤—ã—Ö–æ–¥–∞:**
```json
{
  "documentId": "1ghCImc38YBDRsV2wz_Pv9eaZGTNDHzPgKbULqIOkpXc",
  "content": "–≠—Ç–æ —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞... –ø—Ä–∏–º–µ—Ä–Ω–æ 5000 —Å–∏–º–≤–æ–ª–æ–≤...",
  "title": "–ú–æ—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π"
}
```

### 3. **HTTP Request2 - Delete from Pinecone** üóëÔ∏è
```javascript
–ú–µ—Ç–æ–¥:        POST
URL:          https://knowledge-base-9qnjd0e.svc.aped-4627-b74a.pinecone.io/vectors/delete
–¢–µ–ª–æ:         { "deleteAll": true }
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:   –û—á–∏—Å—Ç–∏—Ç—å Pinecone –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π
```

**–ü–æ—á–µ–º—É deleteAll:**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–µ–π –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ (–±–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π)
- –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –º–∞–ª–µ–Ω—å–∫–∏–π, —É–¥–∞–ª–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ

### 4. **Code JavaScript1 - –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞** üßπ

–°–∞–º–∞—è –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å! –£–¥–∞–ª—è–µ—Ç:

| –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç | –ü—Ä–∏–º–µ—Ä—ã | –ó–∞—á–µ–º |
|------------|---------|-------|
| –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã | `\n`, `\r`, `\t`, `\f` | –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ |
| –°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∫–∞–≤—ã—á–µ–∫ | `""``¬´¬ª` | –ü—É—Ç–∞—é—Ç API –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö |
| –ü—É–Ω–∫—Ç—É–∞—Ü–∏—è (–≤—ã–±–æ—Ä–æ—á–Ω–æ) | `!@#$%^&*` | –£–±–∏—Ä–∞–µ—Ç —à—É–º –≤ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞—Ö |
| Unicode —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã | `‚Ñ¢`, `¬Æ`, —Å—Ç—Ä–µ–ª–∫–∏ | –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ API |
| –°–º–∞–π–ª–∏–∫–∏ | `üòÄüòÅüòÇ` | –ù–µ –Ω—É–∂–Ω—ã –≤ –∑–Ω–∞–Ω–∏—è—Ö |
| –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã | `"  "` ‚Üí `" "` | –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è |

**–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ:**
```
–ë—ã–ª–æ:  "–ü—Ä–∏–≤–µ—Ç,  —ç—Ç–æ  "—Ç–µ–∫—Å—Ç"  —Å  –æ—à–∏–±–∫–∞–º–∏!"
–°—Ç–∞–ª–æ: "–ü—Ä–∏–≤–µ—Ç —ç—Ç–æ —Ç–µ–∫—Å—Ç —Å –æ—à–∏–±–∫–∞–º–∏"
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- OpenAI embeddings –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å "—á–∏—Å—Ç—ã–º" —Ç–µ–∫—Å—Ç–æ–º
- –ü–æ–∏—Å–∫ –≤ Pinecone —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º
- –≠–∫–æ–Ω–æ–º–∏–º —Ç–æ–∫–µ–Ω—ã API (–º–µ–Ω—å—à–µ —Ç–µ–∫—Å—Ç = –¥–µ—à–µ–≤–ª–µ)

### 5. **Code Python - –ß–∞–Ω–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚úÇÔ∏è

```python
chunk_size = 500  # —Å–ª–æ–≤ (–Ω–µ —Å–∏–º–≤–æ–ª–æ–≤!)
```

**–õ–æ–≥–∏–∫–∞:**
1. –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª–æ–≤–∞
2. –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ 500 —Å–ª–æ–≤ –≤ –æ–¥–∏–Ω —á–∞–Ω–∫
3. –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–Ω–æ–º–µ—Ä —á–∞–Ω–∫–∞, –∏—Å—Ç–æ—á–Ω–∏–∫, ID –¥–æ–∫—É–º–µ–Ω—Ç–∞)

**–ü—Ä–∏–º–µ—Ä:**
```
–î–æ–∫—É–º–µ–Ω—Ç: 2500 —Å–ª–æ–≤
‚Üì
–ß–∞–Ω–∫–∏:
- –ß–∞–Ω–∫ 0: —Å–ª–æ–≤–∞ 0-499
- –ß–∞–Ω–∫ 1: —Å–ª–æ–≤–∞ 500-999
- –ß–∞–Ω–∫ 2: —Å–ª–æ–≤–∞ 1000-1499
- –ß–∞–Ω–∫ 3: —Å–ª–æ–≤–∞ 1500-1999
- –ß–∞–Ω–∫ 4: —Å–ª–æ–≤–∞ 2000-2499
```

**–ö–∞–∂–¥—ã–π —á–∞–Ω–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:**
```json
{
  "text": "500 —Å–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞...",
  "metadata": {
    "chunkIndex": 0,
    "source": "google_doc",
    "documentId": "1ghCImc38YBDRsV2wz_Pv9eaZGTNDHzPgKbULqIOkpXc"
  }
}
```

### 6. **HTTP Request - Generate Embeddings** ü§ñ

```javascript
API:          AIML API (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å OpenAI)
Model:        text-embedding-3-small
Input:        –û–¥–∏–Ω —á–∞–Ω–∫ (500 —Å–ª–æ–≤)
Output:       –í–µ–∫—Ç–æ—Ä —Ä–∞–∑–º–µ—Ä–æ–º 1536
–°—Ç–æ–∏–º–æ—Å—Ç—å:    ~$0.02 –∑–∞ –º–∏–ª–ª–∏–æ–Ω —Ç–æ–∫–µ–Ω–æ–≤
```

**–ó–∞–ø—Ä–æ—Å:**
```bash
POST https://api.aimlapi.com/v1/embeddings
{
  "model": "text-embedding-3-small",
  "input": "500 —Å–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞...",
  "encoding_format": "float"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "object": "list",
  "data": [
    {
      "object": "embedding",
      "index": 0,
      "embedding": [0.123, -0.456, 0.789, ... 1536 –∑–Ω–∞—á–µ–Ω–∏–π]
    }
  ],
  "model": "text-embedding-3-small",
  "usage": {
    "prompt_tokens": 150,
    "total_tokens": 150
  }
}
```

### 7. **Merge** üîó
```javascript
–û–±—ä–µ–¥–∏–Ω—è–µ—Ç:   –ß–∞–Ω–∫–∏ (–∏–∑ Python) + –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ (–∏–∑ OpenAI)
–°—Ç—Ä—É–∫—Ç—É—Ä–∞:    [{ text, metadata, data }]
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç merge:**
```json
{
  "text": "500 —Å–ª–æ–≤...",
  "metadata": { "chunkIndex": 0, ... },
  "data": [{ "embedding": [0.123, -0.456, ...] }]
}
```

### 8. **Code JavaScript - Vector Formatting** üì¶

–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è Pinecone API:

```javascript
{
  "id": "chunk_0",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  "values": [0.123, -0.456, ...],    // –í–µ–∫—Ç–æ—Ä (1536 —á–∏—Å–µ–ª)
  "metadata": {
    "text": "500 —Å–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞...",      // –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
    "chunkIndex": 0,
    "source": "google_doc"
  }
}
```

**–ü–æ—á–µ–º—É metadata –≤–∞–∂–Ω–∞:**
- –ö–æ–≥–¥–∞ –ø–æ–∑–∂–µ –∏—â–µ—à—å –≤ Pinecone, –ø–æ–ª—É—á–∞–µ—à—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ LLM)
- –ü–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 9. **HTTP Request1 - Upsert to Pinecone** üì§

```bash
POST https://knowledge-base-9qnjd0e.svc.aped-4627-b74a.pinecone.io/vectors/upsert
{
  "vectors": [
    { "id": "chunk_0", "values": [...], "metadata": {...} },
    { "id": "chunk_1", "values": [...], "metadata": {...} },
    ...
  ]
}
```

**Upsert –æ–∑–Ω–∞—á–∞–µ—Ç:**
- Update –µ—Å–ª–∏ –≤–µ–∫—Ç–æ—Ä —Å —Ç–∞–∫–∏–º ID —É–∂–µ –µ—Å—Ç—å
- Insert –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π –≤–µ–∫—Ç–æ—Ä

## üì• –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—É—Å—Ç–æ–∫ —Ç—Ä–∏–≥–≥–µ—Ä—É - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π —á–∞—Å.

–ù–æ –µ—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é, –æ–∂–∏–¥–∞–µ—Ç—Å—è Google Docs –¥–æ–∫—É–º–µ–Ω—Ç ID –≤ URL –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üì§ –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ù–∞ –≤—ã—Ö–æ–¥–µ –≤–æ—Ä–∫—Ñ–ª–æ—É:
```
‚úÖ Pinecone —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –≤–µ–∫—Ç–æ—Ä—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
‚úÖ –ö–∞–∂–¥—ã–π –≤–µ–∫—Ç–æ—Ä –∏–º–µ–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å –∏—Å—Ö–æ–¥–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢—Ä–µ–±—É–µ–º—ã–µ credentials

1. **Google Docs OAuth2 API**
   ```
   - –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
   - –¢–∏–ø: OAuth2
   ```

2. **Google Drive OAuth2 API**
   ```
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤
   - –¢–∏–ø: OAuth2
   ```

3. **Pinecone API Key**
   ```
   - –ó–∞–ø–∏—Å—å –≤–µ–∫—Ç–æ—Ä–æ–≤
   - –¢–∏–ø: Bearer Token
   ```

4. **AIML API Key** (–¥–ª—è OpenAI embeddings)
   ```
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
   - –¢–∏–ø: Bearer Token
   ```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Google
GOOGLE_DOCS_ID=1ghCImc38YBDRsV2wz_Pv9eaZGTNDHzPgKbULqIOkpXc

# Pinecone
PINECONE_API_KEY=pc-...
PINECONE_INDEX=knowledge-base
PINECONE_HOST=knowledge-base-9qnjd0e.svc.aped-4627-b74a.pinecone.io

# OpenAI embeddings
OPENAI_API_KEY=sk-...
# –∏–ª–∏ AIML API
AIML_API_KEY=c8664f51bd7844158168f44d71d7b77e
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤ n8n
```
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π workflow.json
2. –ü–æ–¥–∫–ª—é—á–∏ Google credentials (—Å–º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —á–µ—Ä–µ–∑ UI)
3. –ü–æ–¥–∫–ª—é—á–∏ Pinecone API key
4. –ü–æ–¥–∫–ª—é—á–∏ AIML/OpenAI API key
```

### 2. –ó–∞–ø—É—Å–∫
```
- –ö–ª–∏–∫ –Ω–∞ Google Drive Trigger ‚Üí "Activate"
- –ò–ª–∏ –Ω–∞–∂–º–∏ "Execute Workflow" –¥–ª—è —Ç–µ—Å—Ç–∞
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
```
- –í –ª–æ–≥–∞—Ö n8n —É–≤–∏–¥–∏—à—å –ø—Ä–æ—Ü–µ—Å—Å
- –í Pinecone Dashboard –ø—Ä–æ–≤–µ—Ä—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
- –ö–∞–∂–¥—ã–π —á–∞–Ω–∫ = –æ–¥–∏–Ω –≤–µ–∫—Ç–æ—Ä
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –î–æ–∫—É–º–µ–Ω—Ç 5000 —Å–ª–æ–≤ | ~10 —á–∞–Ω–∫–æ–≤ |
| –í—Ä–µ–º—è –Ω–∞ —á–∞–Ω–∫ | ~0.5-1 —Å–µ–∫ |
| –û–±—â–µ–µ –≤—Ä–µ–º—è | ~10-15 —Å–µ–∫ |
| –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç | ~$0.02-0.05 |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏—è | –ö–∞–∂–¥—ã–π —á–∞—Å |
| –£—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤ | 99%+ |

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Rate Limiting –Ω–∞ OpenAI API
```
–û—à–∏–±–∫–∞: "Rate limit exceeded"
–†–µ—à–µ–Ω–∏–µ: 
- –î–æ–±–∞–≤–∏—Ç—å exponential backoff retry –ª–æ–≥–∏–∫—É
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞—Ç—á–∏–Ω–≥ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞–Ω–∫–æ–≤ –∑–∞ —Ä–∞–∑)
- –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–Ω–µ –∫–∞–∂–¥—ã–π —á–∞—Å)
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î–æ–∫—É–º–µ–Ω—Ç –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π (>100K —Å–ª–æ–≤)
```
–û—à–∏–±–∫–∞: –û—á–µ–Ω—å –¥–æ–ª–≥–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
–†–µ—à–µ–Ω–∏–µ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —á–∞–Ω–∫–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- –†–∞–∑–¥–µ–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —á–∞—Å—Ç–∏
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ —á–∞–Ω–∫–∏—Ä–æ–≤–∞–Ω–∏–∏
```
–ü—Ä–æ–±–ª–µ–º–∞: –ì—Ä–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ –º–æ–∂–µ—Ç —Ä–∞–∑—Ä—É–±–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
–†–µ—à–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ (overlap)
- –ß–∞–Ω–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º/–ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º –≤–º–µ—Å—Ç–æ —Å–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É ### –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)
```

## üí° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
```javascript
// Wrap –≤ try-catch
try {
  const vectors = await generateEmbeddings(chunks);
  await upsertToPinecone(vectors);
} catch (error) {
  // Log, retry, alert
}
```

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ ClickHouse
```
–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –°—Ç–æ–∏–º–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤
```

### 3. –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤
```python
# –í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
batches = [chunks[i:i+5] for i in range(0, len(chunks), 5)]
# –û—Ç–ø—Ä–∞–≤–∏ 5 —á–∞–Ω–∫–æ–≤ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
```

### 4. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```
–ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ –º–µ–Ω—è–ª—Å—è:
- –ù–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–π –∑–∞–Ω–æ–≤–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- –ü—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∏ –∏–∑ –∫–µ—à–∞
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –≤–æ—Ä–∫—Ñ–ª–æ—É

–≠—Ç–æ—Ç –≤–æ—Ä–∫—Ñ–ª–æ—É **—Å–æ–∑–¥–∞–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π**, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- üì± Telegram Chatbot (workflow #2)
- ü§ñ –î—Ä—É–≥–∏–µ RAG —Å–∏—Å—Ç–µ–º—ã
- üîç –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìö –°—Å—ã–ª–∫–∏

- [Pinecone Documentation](https://docs.pinecone.io)
- [OpenAI Embeddings API](https://platform.openai.com/docs/guides/embeddings)
- [AIML API](https://aimlapi.com)
- [n8n Google Docs Node](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.googledocs/)
- [n8n HTTP Request Node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/)

---

**v1.0.0** | Production Ready ‚úÖ
