# –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π üîî

–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏, —à–∞–±–ª–æ–Ω–∞–º–∏ –∏ –ª–æ–≥–∏–∫–æ–π —É—Å–ª–æ–≤–∏–π.

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è (–ø–ª–∞—Ç–µ–∂–∏, –æ—à–∏–±–∫–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è), –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è, –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ —à–∞–±–ª–æ–Ω—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å retry –ª–æ–≥–∏–∫–æ–π.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã**: Email, SMS, Telegram, Slack, Push
- ‚úÖ **–ü—Ä–∞–≤–∏–ª–∞ —Å—Ä–∞–±–∞—Ç–∏–≤–∞–Ω–∏—è**: If-then –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Urgent (SMS + Telegram), Normal (Email), Low (Push)
- ‚úÖ **–®–∞–±–ª–æ–Ω—ã**: –° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ **–ë–∞—Ç—á–∏–Ω–≥**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ **Rate limiting**: –ù–µ —Å–ø–∞–º–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞**: –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **Tracking**: –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–∞–∂–¥–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ **Unsubscribe**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è
- ‚úÖ **Do Not Disturb**: –£–≤–∞–∂–µ–Ω–∏–µ –∫ —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–∞–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Event triggered
    ‚Üì
Apply Rules (if-then)
    ‚Üì
Select Channel(s)
    ‚Üì
Get Template
    ‚Üì
Substitute Variables
    ‚Üì
Check Rate Limit
    ‚Üì
Queue Notification
    ‚Üì
Send via Channel
    ‚Üì
Track Delivery
    ‚Üì
Log to DB
```

## üîß –¢—Ä–µ–±—É–µ–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **Email**: SMTP (Gmail, SendGrid, AWS SES)
- **SMS**: Twilio, Amazon SNS
- **Telegram**: Bot API
- **Slack**: Bot/App API
- **Push**: Firebase Cloud Messaging
- **Database**: n8n DB –∏–ª–∏ PostgreSQL (–¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª)
- **Redis**: –î–ª—è rate limiting –∏ queue (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìã –ü—Ä–∏–º–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π –∏ –ø—Ä–∞–≤–∏–ª

### –ü—Ä–∞–≤–∏–ª–æ 1: Payment Success
```yaml
event: payment.completed
condition: amount > 100
action:
  channels: [email, telegram]
  template: payment_success_large
  priority: normal
  delay: 0  # —Å—Ä–∞–∑—É
```

**–®–∞–±–ª–æ–Ω:**
```
–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É –Ω–∞ —Å—É–º–º—É ${amount} ${currency}!

–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${order_id}
–°—Ç–∞—Ç—É—Å: ${status}
–î–∞—Ç–∞: ${date}

–û—Ç—Å–ª–µ–¥–∏—Ç—å –∑–∞–∫–∞–∑: ${tracking_link}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Email:
  From: noreply@shop.com
  To: user@example.com
  Subject: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ #12345
  Body: [—à–∞–±–ª–æ–Ω —Å –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏]

Telegram:
  –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É –Ω–∞ —Å—É–º–º—É $99.99 USD!
  –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: 12345
  ...
```

### –ü—Ä–∞–≤–∏–ª–æ 2: System Error Alert
```yaml
event: system.error
condition: severity >= 'critical' AND error_count > 5
action:
  channels: [sms, telegram, slack]  # –≤—Å–µ –∫–∞–Ω–∞–ª—ã —Å—Ä–∞–∑—É!
  template: alert_critical
  priority: urgent
  delay: 0
  retry: 3  # 3 –ø–æ–ø—ã—Ç–∫–∏
```

### –ü—Ä–∞–≤–∏–ª–æ 3: Weekly Digest
```yaml
event: user.weekly_digest
condition: true
action:
  channels: [email]
  template: weekly_digest
  priority: low
  delay: 3600  # –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ —á–∞—Å
  batch: true  # –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å
```

## üìä –ü—Ä–∏–º–µ—Ä—ã —à–∞–±–ª–æ–Ω–æ–≤

### –®–∞–±–ª–æ–Ω 1: Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```html
<h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{first_name}}!</h1>

<p>–°–ø–∞—Å–∏–±–æ —á—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –≤ –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ.</p>

<p>
  <a href="{{verification_link}}" style="background: blue; color: white; padding: 10px 20px;">
    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email
  </a>
</p>

<p>–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–∫–æ–ø–∏—Ä—É–π —ç—Ç—É —Å—Å—ã–ª–∫—É:<br>
{{verification_link}}</p>

<p>–° —É–≤–∞–∂–µ–Ω–∏–µ–º,<br>
–ö–æ–º–∞–Ω–¥–∞ {{company_name}}</p>
```

### –®–∞–±–ª–æ–Ω 2: SMS alert
```
‚ö†Ô∏è {{alert_type}}

{{message}}

ID: {{incident_id}}
–í—Ä–µ–º—è: {{timestamp}}
```

### –®–∞–±–ª–æ–Ω 3: Telegram rich message
```
‚úÖ –ó–∞–∫–∞–∑ {{order_id}} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!

üì¶ –¢—Ä–µ–∫–∏–Ω–≥ –Ω–æ–º–µ—Ä: {{tracking_number}}
üöö –ö–æ–º–ø–∞–Ω–∏—è: {{shipping_company}}
üìç –ê–¥—Ä–µ—Å: {{delivery_address}}
‚è∞ –û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞: {{expected_date}}

üëâ {{tracking_url}}
```

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª (if-then logic)
- [ ] –®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] Email –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (SMTP)
- [ ] SMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Twilio)
- [ ] Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Firebase Push –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Queue –æ–±—Ä–∞–±–æ—Ç–∫–∞
- [ ] Rate limiting
- [ ] Retry –ª–æ–≥–∏–∫–∞
- [ ] Delivery tracking
- [ ] Unsubscribe –º–µ—Ö–∞–Ω–∏–∑–º
- [ ] Do Not Disturb —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

## üí° –ü—Ä–∏–º–µ—Ä—ã —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ö–∞—Å–∫–∞–¥–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```
Event: High CPU usage detected

Time 1 (alert): Send Email
If no ack after 5 min ‚Üí SMS
If no ack after 10 min ‚Üí Telegram urgent
If no ack after 15 min ‚Üí Call on-call engineer
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –£–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
```
Event: Daily digest

IF user.timezone.hour in 08:00-10:00:
  Send immediately via Email (—É—Ç—Ä–æ, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—á—Ç—É)
ELSE:
  Queue for next morning 08:00
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ë–∞—Ç—á–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```
Events: 
  - Item shipped (16:45)
  - Payment received (16:50)
  - Review requested (16:55)

Batched notification at 17:00:
  "Hi! 3 updates: ..."
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```
Rule: Promotional email

Subject variants:
  A: "Special offer just for you! üéâ"
  B: "Limited time: 30% off today"
  C: "Your exclusive deal"

Track: Opens, clicks, conversions
Winner: –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤ production
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª—å |
|---------|------|
| Delivery Rate | > 98% |
| Open Rate (Email) | > 25% |
| Click Rate | > 5% |
| Bounce Rate | < 2% |
| Unsubscribe Rate | < 0.5% |
| Avg Time to Delivery | < 30 sec |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
‚úÖ DO:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (${user_id}, –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ ID)
- –•—Ä–∞–Ω–∏—Ç—å templates –≤ DB —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏ –∫–æ–≥–¥–∞
- –®–∏—Ñ—Ä–æ–≤–∞—Ç—å email –∞–¥—Ä–µ—Å–∞ –≤ –ª–æ–≥–∞—Ö

‚ùå DON'T:
- –ù–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω—ã
- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å API –∫–ª—é—á–∏ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
```

### Rate Limiting
```
- 5 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- 1 SMS –≤ —á–∞—Å (–¥–æ—Ä–æ–≥—É—â–∏–µ!)
- Email –±–∞—Ç—á–∏—Ç—Å—è (–º–∞–∫—Å–∏–º—É–º 10 –≤ –¥–µ–Ω—å)
- Telegram –Ω–µ –ª–∏–º–∏—Ç–∏–º (–±–µ—Å–ø–ª–∞—Ç–µ–Ω)
```

## üìö –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–µ–π—Å–æ–≤

### –ö–æ–º–ø–∞–Ω–∏—è E-commerce
```
1. Order placed ‚Üí "Thanks! Processing..."
2. Payment confirmed ‚Üí Email + SMS
3. Shipped ‚Üí Email + Telegram + Push
4. Delivered ‚Üí Push (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ)
5. 1 –Ω–µ–¥–µ–ª—è ‚Üí Email "How was your experience?"
```

### –ö–æ–º–ø–∞–Ω–∏—è SaaS
```
1. Signup ‚Üí Email verification
2. Trial ending ‚Üí Email (3 –¥–Ω—è –¥–æ –∫–æ–Ω—Ü–∞)
3. Payment required ‚Üí Email + SMS
4. Important feature added ‚Üí Email + Slack (–¥–ª—è team members)
5. System error ‚Üí SMS + Slack (–¥–ª—è engineers)
```

### –ö–æ–º–ø–∞–Ω–∏—è Logistics
```
1. Pickup scheduled ‚Üí SMS + Email
2. Picked up ‚Üí Push
3. In transit ‚Üí Real-time GPS tracking push
4. Delivery attempt ‚Üí SMS
5. Delivered ‚Üí Email + SMS
6. Problem ‚Üí SMS + call
```

---

**–°—Ç–∞—Ç—É—Å:** üìÖ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ)
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (–º–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ)
