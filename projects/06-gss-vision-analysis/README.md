â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ Ğ¡Ğ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ£Ğ®Ğ©Ğ˜Ğ¥ ĞŸĞ ĞĞ•ĞšĞ¢ĞĞ’ Ğ’ n8n-portfolio                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ĞŸĞ ĞĞ•ĞšĞ¢ 1: GSS Portfolio (testovoe-zadanie)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ĞĞĞĞ›Ğ˜Ğ— Ğ¡Ğ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ£Ğ®Ğ©Ğ•Ğ“Ğ ĞŸĞ ĞĞ•ĞšĞ¢Ğ:

âœ… Ğ§Ñ‚Ğ¾ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾:
  â€¢ Ğ”Ğ²Ğ° Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… workflow (Vision Analysis + Retry Logic)
  â€¢ Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ OpenRouter API (Google Gemini 2.0 Flash)
  â€¢ Supabase Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  â€¢ State Machine Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ retry'ÑĞ¼Ğ¸
  â€¢ Error handling Ğ¸ Ğ´ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
  â€¢ JSONB Ğ¿Ğ¾Ğ»Ñ Ğ² Ğ‘Ğ”
  â€¢ SQL views Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

âœ… ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:
  â€¢ GSS-01: Vision Analysis (7-8 nodes)
  â€¢ GSS-02: Retry Logic State Machine (10-12 nodes)
  â€¢ SQL ÑÑ…ĞµĞ¼Ğ° (3 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ + 4 view)
  â€¢ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

ğŸ“ˆ Ğ Ğ°Ğ·Ğ¼ĞµÑ€:
  â€¢ ~20 nodes Ğ² Ğ´Ğ²ÑƒÑ… workflow'Ğ°Ñ…
  â€¢ ~40-50 KB JSON
  â€¢ ~10 KB SQL
  â€¢ Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ĞŸĞ Ğ•Ğ”Ğ›ĞĞ–Ğ•ĞĞ˜Ğ•: Ğ˜ĞĞ¢Ğ•Ğ“Ğ Ğ˜Ğ ĞĞ’ĞĞ¢Ğ¬ ĞšĞĞš ĞŸĞ ĞĞ•ĞšĞ¢ #6
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° n8n-portfolio:
  ĞŸÑ€Ğ¾ĞµĞºÑ‚ 1 (âœ… RAG Chatbot)
  ĞŸÑ€Ğ¾ĞµĞºÑ‚ 2 (ğŸ“‹ Support Automation - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)
  ĞŸÑ€Ğ¾ĞµĞºÑ‚ 3 (ğŸ“‹ Payment Integration - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)
  ĞŸÑ€Ğ¾ĞµĞºÑ‚ 4 (ğŸ“‹ Data Pipeline - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)
  ĞŸÑ€Ğ¾ĞµĞºÑ‚ 5 (ğŸ“‹ Notification System - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)

ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ: Ğ”ĞĞ‘ĞĞ’Ğ˜Ğ¢Ğ¬ ĞŸĞ ĞĞ•ĞšĞ¢ 6
  ĞŸÑ€Ğ¾ĞµĞºÑ‚ 6 (âœ… GSS Vision Analysis - Ğ“ĞĞ¢ĞĞ’!)
    - Vision Analysis + Retry Logic
    - Real-world production workflow
    - AI Vision, Supabase, State Machine


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ¨ĞĞ“ 1: ĞŸĞĞ”Ğ“ĞĞ¢ĞĞ’ĞšĞ Ğ¤ĞĞ™Ğ›ĞĞ’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ”Ğ›Ğ¯ ĞŸĞĞ Ğ¢Ğ¤ĞĞ›Ğ˜Ğ:

n8n-portfolio/
â”œâ”€â”€ projects/
â”‚   â”œâ”€â”€ 01-rag-chatbot/            âœ… Ğ“ĞĞ¢ĞĞ’
â”‚   â”œâ”€â”€ 02-support-automation/     ğŸ“‹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
â”‚   â”œâ”€â”€ 03-payment-integration/    ğŸ“‹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
â”‚   â”œâ”€â”€ 04-data-pipeline/          ğŸ“‹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
â”‚   â”œâ”€â”€ 05-notification-system/    ğŸ“‹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
â”‚   â”‚
â”‚   â””â”€â”€ 06-gss-vision-analysis/    âœ… ĞĞĞ’Ğ«Ğ™
â”‚       â”œâ”€â”€ README.md              (Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
â”‚       â”œâ”€â”€ architecture.md        (Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹)
â”‚       â”œâ”€â”€ gss01-vision.json      (workflow 1)
â”‚       â”œâ”€â”€ gss02-retry-logic.json (workflow 2)
â”‚       â”œâ”€â”€ schema.sql             (Ğ‘Ğ” ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°)
â”‚       â”œâ”€â”€ example-data.json      (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²)
â”‚       â””â”€â”€ screenshots/
â”‚           â”œâ”€â”€ gss01-diagram.png
â”‚           â”œâ”€â”€ gss02-diagram.png
â”‚           â””â”€â”€ supabase-schema.png


Ğ¨ĞĞ“ 1.1: Ğ¡ĞšĞĞ§ĞĞ¢Ğ¬ Ğ¢Ğ’ĞĞ˜ Ğ¤ĞĞ™Ğ›Ğ« Ğ˜Ğ— GITHUB

ĞÑƒĞ¶Ğ½Ğ¾ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
  1. workflows/gss01-vision-analysis.json
  2. workflows/gss02-retry-logic.json
  3. queries.sql
  4. screenshots/ (Ğ²ÑĞµ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸)
  5. README.md (Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ)


Ğ¨ĞĞ“ 1.2: Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ ĞĞĞ’Ğ£Ğ® Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ£

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ğ¿ĞºÑƒ: projects/06-gss-vision-analysis/

Ğ¤Ğ°Ğ¹Ğ»Ñ‹:
  â€¢ README.md (20KB - Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ)
  â€¢ architecture.md (15KB - Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹)
  â€¢ gss01-vision.json (workflow JSON)
  â€¢ gss02-retry-logic.json (workflow JSON)
  â€¢ schema.sql (Ğ‘Ğ”)
  â€¢ example-data.json (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ¨ĞĞ“ 2: Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ• Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

README.md Ğ”Ğ›Ğ¯ ĞŸĞ ĞĞ•ĞšĞ¢Ğ 6:

ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ: "GSS Vision Analysis - AI-Powered Real Estate Image Classification"

Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:

1ï¸âƒ£ ĞĞ‘Ğ—ĞĞ  (1KB)
   - Ğ§Ñ‚Ğ¾ ÑÑ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚
   - Ğ—Ğ°Ñ‡ĞµĞ¼ ÑÑ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾
   - Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹

2ï¸âƒ£ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ (2KB)
   - Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°
   - ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
   - Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

3ï¸âƒ£ WORKFLOW 1: VISION ANALYSIS (5KB)
   - ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
   - Ğ¨Ğ°Ğ³Ğ¸
   - ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ²Ñ…Ğ¾Ğ´Ğ°/Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°
   - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

4ï¸âƒ£ WORKFLOW 2: RETRY LOGIC (5KB)
   - ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
   - State Machine Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
   - ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
   - ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²

5ï¸âƒ£ Ğ‘Ğ” Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ (3KB)
   - Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
   - JSONB Ğ¿Ğ¾Ğ»Ñ
   - Views Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
   - SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹

6ï¸âƒ£ Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ˜ (2KB)
   - OpenRouter API (Google Gemini 2.0 Flash)
   - Supabase
   - Slack (Ğ´Ğ»Ñ alerts)

7ï¸âƒ£ Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ˜ Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• (2KB)
   - Import Ğ² n8n
   - Setup Supabase
   - Setup Credentials
   - Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ (curl)

8ï¸âƒ£ ĞœĞ•Ğ¢Ğ Ğ˜ĞšĞ˜ Ğ˜ ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“ (1KB)
   - ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹
   - SQL queries Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
   - ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ output'Ğ¾Ğ²


ĞŸĞ Ğ˜ĞœĞ•Ğ  Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ« README.md:

# GSS Vision Analysis - Real Estate Image Classification

## ğŸ¯ ĞĞ±Ğ·Ğ¾Ñ€

AI-powered ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ»Ñ ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Google Gemini 2.0 Flash Vision API.

**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:**
- ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ² Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
- ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾Ğ¼ĞµÑ‰ĞµĞ½Ğ¸Ñ (kitchen, bedroom, living room)
- Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ (Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹, ÑÑ‚Ğ¸Ğ»ÑŒ)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ´ĞµĞ»Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ½ĞµÑƒĞ´Ğ°Ñ‡Ğ¸ (Retry Logic State Machine)

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** 2 production-ready workflow'Ğ° Ñ error handling Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ retry

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
[Vision Analysis Webhook]
    â†“
[Parse Image + Check Duplicate]
    â†“
[OpenRouter API - Google Gemini]
    â†“
[Parse Response + Save to Supabase]
    â†“
[On Fail: Trigger Retry Logic]

[Retry Logic - State Machine]
    â†“
[Calculate New Parameters]
    â†“
[Switch: Retry / Fatal Error / Success]
    â†“
[Update DB + Slack Alert]
```

## ğŸ”„ Workflow 1: Vision Analysis

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ñ‡ĞµÑ€ĞµĞ· AI

**Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
```json
{
  "property_id": "550e8400-e29b-41d4-a716-446655440000",
  "image_url": "https://example.com/render.jpg",
  "camera_settings": {
    "fov": 45,
    "distance": 3.0
  }
}
```

**Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
```json
{
  "job_id": "550e8400-e29b-41d4-a716-446655440001",
  "render_id": "550e8400-e29b-41d4-a716-446655440002",
  "status": "CLASSIFIED",
  "technical_tags": ["kitchen", "modern", "island", "marble_countertops"],
  "analysis": {
    "room_type": "kitchen",
    "style": "contemporary",
    "color_scheme": "neutral",
    "furniture_count": 8,
    "confidence": 0.92
  }
}
```

**Nodes:**
1. Webhook trigger
2. Check Duplicate (property_id)
3. IF condition (not duplicate)
4. Create Job in Supabase
5. Set Processing status
6. HTTP - Perplexity/OpenRouter API
7. Parse response
8. IF success branch
9. Save Render + Set CLASSIFIED
10. ELSE: Save error + Set FAILED

**Error Handling:**
- Timeout: 60 ÑĞµĞº
- Try-catch JSON parsing
- Save to error table
- Alert to Slack


## ğŸ” Workflow 2: Retry Logic State Machine

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ retry Ñ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²

**Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
```json
{
  "job_id": "550e8400-e29b-41d4-a716-446655440000",
  "render_id": "existing-render-uuid",
  "qc_result": {
    "verdict": "FAIL",
    "reason": "Geometry distortion",
    "confidence": 0.85,
    "suggested_fix": "increase_structure_strength"
  }
}
```

**State Machine:**
```
QUEUED
  â†“
PROCESSING (1st attempt)
  â”œâ”€ Success â†’ CLASSIFIED
  â””â”€ Fail â†’ RETRY
      â†“
      (Modify parameters based on QC feedback)
      â†“
      PROCESSING (2nd attempt)
      â”œâ”€ Success â†’ CLASSIFIED
      â””â”€ Fail â†’ RETRY
          â†“
          (Modify parameters again)
          â†“
          PROCESSING (3rd attempt)
          â”œâ”€ Success â†’ CLASSIFIED
          â””â”€ Fail â†’ MANUAL_REVIEW
              â†“
              Slack Alert to team
```

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸:**

| suggested_fix | Action |
|---|---|
| increase_structure_strength | structure_scale += 0.10 (max 1.0) |
| reduce_artifacts | cfg_scale -= 0.5 (min 3.0) |
| increase_detail | cfg_scale += 0.5 (max 15.0) |
| smooth_geometry | structure_scale -= 0.05 (min 0.2) |

**Nodes:**
1. Webhook (QC result)
2. Get last attempt
3. Calculate new params
4. Switch node (3 branches)
   - RETRY: modify params â†’ call API â†’ save attempt
   - FATAL_ERROR: set manual review â†’ slack alert
   - SUCCESS: set complete â†’ save success


## ğŸ—„ï¸ Ğ‘Ğ” Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:**

```sql
jobs:
  - id (uuid)
  - property_id (uuid)
  - status (enum: QUEUED, PROCESSING, CLASSIFIED, FAILED, MANUAL_REVIEW)
  - created_at
  - updated_at

renders:
  - id (uuid)
  - job_id (uuid)
  - image_url (text)
  - status (enum)
  - technical_tags (JSONB array)  -- ["kitchen", "modern"]
  - full_analysis (JSONB)
  - created_at

generation_attempts:
  - id (uuid)
  - job_id (uuid)
  - attempt_number (int)
  - parameters (JSONB)  -- {steps: 50, cfg_scale: 7.5}
  - result (enum: SUCCESS, RETRY, FATAL_ERROR)
  - error_message (text)
  - created_at
```

**JSONB Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸:**

```sql
-- ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²ÑĞµ ĞºÑƒÑ…Ğ½Ğ¸
SELECT * FROM renders WHERE technical_tags @> '["kitchen"]';

-- ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ
SELECT * FROM renders WHERE full_analysis ->> 'style' = 'contemporary';

-- ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ
SELECT 
  technical_tags,
  COUNT(*) as count
FROM renders,
JSONB_ARRAY_ELEMENTS(technical_tags) AS tag
WHERE technical_tags IS NOT NULL
GROUP BY tag
ORDER BY count DESC;
```

**Views:**

```sql
v_jobs_stats - ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°Ğ¼
v_recent_renders - Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 50 Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ²
v_retry_stats - ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ retry'ÑĞ¼
v_generation_history - Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
```


## ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº

### Import Ğ² n8n

1. Ğ’ n8n Ğ½Ğ°Ğ¶Ğ¼Ğ¸ "+" â†’ "Import from File"
2. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ gss01-vision.json
3. ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸ Ğ´Ğ»Ñ gss02-retry-logic.json

### Setup Supabase

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ½Ğ° supabase.com
2. ĞÑ‚ĞºÑ€Ğ¾Ğ¹ SQL Editor
3. Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸ queries Ğ¸Ğ· schema.sql
4. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹ URL Ğ¸ API Key

### Credentials Ğ² n8n

1. Supabase:
   - URL: https://your-project.supabase.co
   - Service Role Key: (Ğ¸Ğ· Settings)

2. OpenRouter API:
   - API Key: (ÑĞ¾Ğ·Ğ´Ğ°Ğ¹ Ğ½Ğ° openrouter.ai)
   - Model: google/gemini-2.0-flash-exp

3. Slack (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):
   - Webhook URL

### Ğ¢ĞµÑÑ‚ GSS-01

```bash
curl -X POST https://your-n8n.cloud/webhook/gss01-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "property_id": "550e8400-e29b-41d4-a716-446655440000",
    "image_url": "https://example.com/render.jpg"
  }'
```

### Ğ¢ĞµÑÑ‚ GSS-02

```bash
curl -X POST https://your-n8n.cloud/webhook/gss02-qc-result \
  -H "Content-Type: application/json" \
  -d '{
    "job_id": "550e8400-e29b-41d4-a716-446655440000",
    "qc_result": {
      "verdict": "FAIL",
      "reason": "Geometry distortion",
      "suggested_fix": "increase_structure_strength"
    }
  }'
```


## ğŸ“Š ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸

```sql
-- Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
SELECT 
  status,
  COUNT(*) as count,
  ROUND(COUNT(*) * 100.0 / (SELECT COUNT(*) FROM jobs), 2) as percentage
FROM jobs
GROUP BY status;

-- Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº
SELECT 
  AVG(attempt_number) as avg_attempts,
  MAX(attempt_number) as max_attempts,
  MIN(attempt_number) as min_attempts
FROM generation_attempts
WHERE result IN ('SUCCESS', 'FATAL_ERROR');

-- Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ retry
SELECT
  'Succeeds at attempt 1' as metric,
  COUNT(*) as count
FROM (
  SELECT DISTINCT job_id FROM generation_attempts WHERE attempt_number = 1 AND result = 'SUCCESS'
)
UNION ALL
SELECT
  'Succeeds at attempt 2',
  COUNT(*)
FROM (
  SELECT DISTINCT job_id FROM generation_attempts WHERE attempt_number = 2 AND result = 'SUCCESS'
);
```


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ¨ĞĞ“ 3: ĞĞ‘ĞĞĞ’Ğ˜Ğ¢Ğ¬ Ğ“Ğ›ĞĞ’ĞĞ«Ğ™ README
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

n8n-portfolio/README.md Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:

```markdown
## ĞŸÑ€Ğ¾ĞµĞºÑ‚Ñ‹

### âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹

**ĞŸÑ€Ğ¾ĞµĞºÑ‚ 1: RAG Chatbot** (38KB)
- Google Docs â†’ OpenAI embeddings â†’ Pinecone â†’ Telegram
- 16 nodes, 500+ RPD

**ĞŸÑ€Ğ¾ĞµĞºÑ‚ 6: GSS Vision Analysis** (25KB)
- Real estate image classification with AI Vision API
- Vision Analysis + Retry Logic State Machine
- Supabase JSONB, OpenRouter API
- 20 nodes, production-ready
```

Also Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ROADMAP:

```markdown
## Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

âœ… ĞŸÑ€Ğ¾ĞµĞºÑ‚ 1: RAG Chatbot - Ğ“ĞĞ¢ĞĞ’
âœ… ĞŸÑ€Ğ¾ĞµĞºÑ‚ 6: GSS Vision Analysis - Ğ“ĞĞ¢ĞĞ’
ğŸ”„ ĞŸÑ€Ğ¾ĞµĞºÑ‚ 2: Support Automation - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ
ğŸ”„ ĞŸÑ€Ğ¾ĞµĞºÑ‚ 3: Payment Integration - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ
ğŸ”„ ĞŸÑ€Ğ¾ĞµĞºÑ‚ 4: Data Pipeline - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ
ğŸ”„ ĞŸÑ€Ğ¾ĞµĞºÑ‚ 5: Notification System - Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ
```


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ¨ĞĞ“ 4: Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TODO:

1ï¸âƒ£ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¸Ğ· testovoe-zadanie Ñ€ĞµĞ¿Ğ¾
   - gss01-vision-analysis.json
   - gss02-retry-logic.json
   - queries.sql
   - screenshots/

2ï¸âƒ£ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ğ¿ĞºÑƒ projects/06-gss-vision-analysis/

3ï¸âƒ£ ĞŸĞ¾Ğ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹:
   - gss01-vision.json
   - gss02-retry-logic.json
   - schema.sql (Ğ¸Ğ· queries.sql)
   - ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ screenshots/

4ï¸âƒ£ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ README.md (20KB) Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹

5ï¸âƒ£ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ architecture.md Ñ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ°Ğ¼Ğ¸

6ï¸âƒ£ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ example-data.json Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸

7ï¸âƒ£ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ README.md

8ï¸âƒ£ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ROADMAP.md

9ï¸âƒ£ Git commit + push

10ï¸âƒ£ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ĞŸĞ Ğ•Ğ˜ĞœĞ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµĞºÑ€ÑƒÑ‚ĞµÑ€Ñƒ:
  â€¢ Ğ£Ğ¼ĞµĞµÑˆÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ API (OpenRouter)
  â€¢ Ğ—Ğ½Ğ°ĞµÑˆÑŒ advanced n8n (State Machine, JSONB)
  â€¢ ĞœĞ¾Ğ¶ĞµÑˆÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸ retry'Ğ¸
  â€¢ Ğ£Ğ¼ĞµĞµÑˆÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ complex workflows
  â€¢ Ğ•ÑÑ‚ÑŒ production Ğ¾Ğ¿Ñ‹Ñ‚

ğŸ“ˆ Ğ”Ğ»Ñ Ğ¿Ğ¾Ñ€Ñ‚Ñ„Ğ¾Ğ»Ğ¸Ğ¾:
  â€¢ 2 Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… workflow'Ğ° (40 nodes total)
  â€¢ 60KB Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸
  â€¢ Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
  â€¢ SQL expertise
  â€¢ Ğ¢ĞµĞ¿ĞµÑ€ÑŒ 2 ready Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° + 4 Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ñ… = 67% Ğ¿Ğ¾Ñ€Ñ‚Ñ„Ğ¾Ğ»Ğ¸Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾

ğŸ’¼ Ğ”Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ:
  â€¢ "Ğ’Ğ¾Ñ‚ Ñ Ğ´ĞµĞ»Ğ°Ğ» Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ñ AI Vision API"
  â€¢ ĞœĞ¾Ğ¶ĞµÑˆÑŒ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ: State Machine + retry logic
  â€¢ Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
  â€¢ Ğ—Ğ½Ğ°Ğ½Ğ¸Ğµ JSONB Ğ¸ PostgreSQL
  â€¢ Production-ready Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

v1.0.0 | Integration Strategy âœ…